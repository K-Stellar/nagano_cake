<div class="container my-5">
  <div class="row">
    <div class="col">
      <h3><span class="bg-light bg-gradient">注文履歴詳細</span></h3>
      <%= form_with model: @order, url: admin_order_path(@order.id), method: :patch, local:true do |f| %> <!--相性の問題でテーブルタグの外にステータス更新formを設置-->
      <table class="table table-borderless">
        <tbody>
          <tr>
            <td class="w-25"><strong class="border-bottom">購入者</strong></td>
            <td><%= @order.customer.full_name %></td>
          </tr>
          <tr>
            <td class="w-25">注文日</td>
            <td><%= @order.created_at.strftime('%Y/%m/%d') %></td>
          </tr>
          <tr>
            <td class="w-25">配送先</td>
            <td><%= @order.address %></td>
          </tr>
          <tr>
            <td class="w-25">支払方法</td>
            <td><%= @order.payment_type %></td>
          </tr>
          <tr>
            <td class="w-25">注文ステータス</td>
            <td><%= f.select :status, </td>
          </tr>
        </tbody>
      </table>
      <%end%>
      
      <table class="table table-borderless border-top mt-3">
      <thead class="bg-light">
        <th class="border-top">商品ID</th>
        <th>商品名</th>
        <th>税抜価格</th>
        <th>ジャンル</th>
        <th>ステータス</th>
      </thead>
      <tbody>
        <% @products.each do |product| %>
          <tr>
            <td><%= product.id %></td>
            <td><%= link_to product.name, admin_product_path(product.id), class: "text-dark border-bottom border-dark" %></td>
            <td><%= product.price.to_s(:delimited) %></td>
            <td><%= product.genre.name %></td>
            <td>
              <!--販売中と販売停止中で色を変えなければならないため、条件分岐で表示-->
              <% if product.is_active == true %>
                <strong class="text-success">販売中</strong>
              <% else %>
                <strong class="text-muted">販売停止中</strong>
              <%end%>
            </td>
          </tr>
        <%end%>
      </tbody>
    </table>
    </div>
  </div>
</div>